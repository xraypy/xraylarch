

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>8.4. Fit Results and Outputs &#8212; larch 0.9.37 documentation</title>
    <link rel="stylesheet" href="../_static/larchdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="8.5. Some Builtin Line-shape Functions" href="lineshapes.html" />
    <link rel="prev" title="8.3. minimize() and objective Functions" href="minimize.html" />
  <script type="text/x-mathjax-config">
     MathJax.Hub.Config({ "TeX": {Macros: {AA : "{\\unicode{x212B}}"}},
			 "HTML-CSS": {scale: 90}});
  </script>

  </head><body>
<div style=" color: #c5daba;  text-align: left; height:65px; padding: 0px">
<table border=1>
  <tr>
    <td width=20%>
	<a href="../index.html">
	 <img src="../_static/larchcones.png" height=60px alt="larchcones"/></a>
    </td>
    <td width=75% padding=0>
      <font size=+2>
	<a href="../index.html" style="color:#772211">
	  Larch: Data Analysis Tools for X-ray Spectroscopy
	</a>
      </font>
    </td>
   </tr></table>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="lineshapes.html" title="8.5. Some Builtin Line-shape Functions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="minimize.html" title="8.3. minimize() and objective Functions"
             accesskey="P">previous</a> |</li>
   <li>[<a href="../index.html"> Larch Home</a>|</li>
   <li><a href="../getting_started.html"> Getting Started</a>|</li>
   <li><a href="../xafs/index.html">XAFS Analysis</a>|</li>
   <li><a href="../xray/index.html">X-ray Databases</a>|</li>
   <li><a href="../xrf/index.html">XRF Analysis</a>|</li>
   <li><a href="index.html">Curve Fitting</a>|</li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">8. Fitting and Modeling Data</a> &#187;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="minimize.html"
                        title="previous chapter">8.3. <code class="docutils literal notranslate"><span class="pre">minimize()</span></code> and objective Functions</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="lineshapes.html"
                        title="next chapter">8.5. Some Builtin Line-shape Functions</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/fitting/results.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="fit-results-and-outputs">
<span id="fitting-results-sec"></span><h1>8.4. Fit Results and Outputs<a class="headerlink" href="#fit-results-and-outputs" title="Permalink to this headline">¶</a></h1>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.9.34: </span><code class="xref py py-func docutils literal notranslate"><span class="pre">minimize()</span></code> returns a result group containing fit statistics.</p>
</div>
<p>After the fit has completed, several statistics are output and available to
describe the quality of the fit and the estimated values for the Parameter
values and uncertainties.  The main statistics are written to group
returned by <code class="xref py py-func docutils literal notranslate"><span class="pre">minimize()</span></code>, while the parameter values in <em>paramgroup</em>
are updated to their best-fit values.</p>
<p>The estimated values, uncertainties, and correlations for each varied
Parameter are written as attributes of that Parameter.  Thus, after a fit,
each variable Parameter <code class="docutils literal notranslate"><span class="pre">par</span></code> will be updated so that <code class="docutils literal notranslate"><span class="pre">par.value</span></code> will
hold the estimated best-fit value, <code class="docutils literal notranslate"><span class="pre">par.stderr</span></code> will hold the estimated
uncertainty (1-<span class="math notranslate nohighlight">\(\sigma\)</span> standard error), and <code class="docutils literal notranslate"><span class="pre">par.correl</span></code> will hold
a dictionary of correlation values with the other variable Parameters.</p>
<p>General Fit statistics describing the quality of the fit and details about
how the fit proceeded will be put into the result group with
variable names and meanings as outlines in
<a class="reference internal" href="#minimize-stats-table"><span class="std std-ref">Table of Fit Statistics</span></a>.  For advanced users,
the fitting class instance and result from <cite>lmfit</cite> are available.</p>
<blockquote id="minimize-stats-table">
<div><p>Table of Fit Statistics and Results contained in the return value of <code class="xref py py-func docutils literal notranslate"><span class="pre">minimize()</span></code>.</p>
<p>Listed are the names and description of items in the fit result group
returned by the <code class="xref py py-func docutils literal notranslate"><span class="pre">minimize()</span></code> function.  Many of these items are
directly from <a class="reference external" href="https://lmfit.github.io/lmfit-py/">lmfit</a>.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">Description of Statistical Quantity or Output</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>nvarys</td>
<td>number of variable parameters in the fit</td>
</tr>
<tr class="row-odd"><td>ndata</td>
<td>number of data points</td>
</tr>
<tr class="row-even"><td>nfree</td>
<td>ndata - nfree</td>
</tr>
<tr class="row-odd"><td>chi_square</td>
<td>chi-square: <span class="math notranslate nohighlight">\(\chi^2 = \sum_i^N [{\rm Resid}_i]^2\)</span></td>
</tr>
<tr class="row-even"><td>chi_reduced</td>
<td>reduced chi-square: <span class="math notranslate nohighlight">\(\chi^2_{\nu}= {\chi^2} / {(N - N_{\rm varys})}\)</span> |</td>
</tr>
<tr class="row-odd"><td>aic</td>
<td><a class="reference external" href="https://lmfit.github.io/lmfit-py/fitting.html#akaike-and-bayesian-information-criteria">Akaike Information Criteria</a></td>
</tr>
<tr class="row-even"><td>bic</td>
<td><a class="reference external" href="https://lmfit.github.io/lmfit-py/fitting.html#akaike-and-bayesian-information-criteria">Bayesian Information Criteria</a></td>
</tr>
<tr class="row-odd"><td>residual</td>
<td>final residual array</td>
</tr>
<tr class="row-even"><td>covar</td>
<td>covariance matrix (ordered according to <cite>var_names</cite>).</td>
</tr>
<tr class="row-odd"><td>var_names</td>
<td>list of variable parameter names</td>
</tr>
<tr class="row-even"><td>params</td>
<td>lmfit <a class="reference external" href="https://lmfit.github.io/lmfit-py/parameters.html#lmfit.parameter.Parameters">Parameters</a></td>
</tr>
<tr class="row-odd"><td>fitter</td>
<td>lmfit <a class="reference external" href="https://lmfit.github.io/lmfit-py/fitting.html#lmfit.minimizer.Minimizer">Minimizer</a></td>
</tr>
<tr class="row-even"><td>fit_details</td>
<td>lmfit <a class="reference external" href="https://lmfit.github.io/lmfit-py/fitting.html#lmfit.minimizer.MinimizerResult">MinimizerResult</a></td>
</tr>
<tr class="row-odd"><td>nfev</td>
<td>number of evaluations of the fit residual function.</td>
</tr>
<tr class="row-even"><td>success</td>
<td>bool (<cite>True</cite> or <cite>False</cite>) for whether fit appeared to succeed.</td>
</tr>
<tr class="row-odd"><td>errorbars</td>
<td>bool (<cite>True</cite> or <cite>False</cite>) for whether uncertainties were estimated.</td>
</tr>
<tr class="row-even"><td>message</td>
<td>text message from fit</td>
</tr>
<tr class="row-odd"><td>lmdif_message</td>
<td>text message from Fortran least-squares function</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.9.34: </span><a class="reference internal" href="#fit_report" title="fit_report"><code class="xref py py-func docutils literal notranslate"><span class="pre">fit_report()</span></code></a> uses a result group returned by <code class="xref py py-func docutils literal notranslate"><span class="pre">minimize()</span></code></p>
</div>
<dl class="function">
<dt id="fit_report">
<code class="descname">fit_report</code><span class="sig-paren">(</span><em>result</em>, <em>show_correl=True</em>, <em>min_correl=0.1</em><span class="sig-paren">)</span><a class="headerlink" href="#fit_report" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a fit report for a fit given a parameter group.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>result</strong> – fit result group, returned by <code class="xref py py-func docutils literal notranslate"><span class="pre">minimize()</span></code>.</li>
<li><strong>show_correl</strong> – flag (<code class="docutils literal notranslate"><span class="pre">True</span></code>/<code class="docutils literal notranslate"><span class="pre">False</span></code>) to show parameter correlations.</li>
<li><strong>min_correl</strong> – smallest absolute value of correlation to show.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">string of fit report.   This can be printed or stored.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>A typical result from <a class="reference internal" href="#fit_report" title="fit_report"><code class="xref py py-func docutils literal notranslate"><span class="pre">fit_report()</span></code></a> would look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">larch</span><span class="o">&gt;</span> <span class="nb">print</span> <span class="n">fit_report</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="p">[[</span><span class="n">Fit</span> <span class="n">Statistics</span><span class="p">]]</span>
    <span class="c1"># function evals   = 28</span>
    <span class="c1"># data points      = 201</span>
    <span class="c1"># variables        = 4</span>
    <span class="n">chi</span><span class="o">-</span><span class="n">square</span>         <span class="o">=</span> <span class="mf">0.50471</span>
    <span class="n">reduced</span> <span class="n">chi</span><span class="o">-</span><span class="n">square</span> <span class="o">=</span> <span class="mf">0.002562</span>
    <span class="n">Akaike</span> <span class="n">info</span> <span class="n">crit</span>   <span class="o">=</span> <span class="o">-</span><span class="mf">1195.4</span>
    <span class="n">Bayesian</span> <span class="n">info</span> <span class="n">crit</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1182.2</span>
<span class="p">[[</span><span class="n">Variables</span><span class="p">]]</span>
    <span class="n">amp</span><span class="p">:</span>   <span class="mf">12.0312835</span> <span class="o">+/-</span> <span class="mf">0.076725</span> <span class="p">(</span><span class="mf">0.64</span><span class="o">%</span><span class="p">)</span> <span class="p">(</span><span class="n">init</span><span class="o">=</span> <span class="mi">5</span><span class="p">)</span>
    <span class="n">wid</span><span class="p">:</span>   <span class="mf">2.01663402</span> <span class="o">+/-</span> <span class="mf">0.011920</span> <span class="p">(</span><span class="mf">0.59</span><span class="o">%</span><span class="p">)</span> <span class="p">(</span><span class="n">init</span><span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">off</span><span class="p">:</span>   <span class="mf">0.99188155</span> <span class="o">+/-</span> <span class="mf">0.005226</span> <span class="p">(</span><span class="mf">0.53</span><span class="o">%</span><span class="p">)</span> <span class="p">(</span><span class="n">init</span><span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">cen</span><span class="p">:</span>   <span class="mf">1.49995279</span> <span class="o">+/-</span> <span class="mf">0.010144</span> <span class="p">(</span><span class="mf">0.68</span><span class="o">%</span><span class="p">)</span> <span class="p">(</span><span class="n">init</span><span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">[[</span><span class="n">Correlations</span><span class="p">]]</span> <span class="p">(</span><span class="n">unreported</span> <span class="n">correlations</span> <span class="n">are</span> <span class="o">&lt;</span>  <span class="mf">0.100</span><span class="p">)</span>
    <span class="n">C</span><span class="p">(</span><span class="n">amp</span><span class="p">,</span> <span class="n">off</span><span class="p">)</span>                  <span class="o">=</span> <span class="o">-</span><span class="mf">0.730</span>
    <span class="n">C</span><span class="p">(</span><span class="n">amp</span><span class="p">,</span> <span class="n">wid</span><span class="p">)</span>                  <span class="o">=</span>  <span class="mf">0.719</span>
    <span class="n">C</span><span class="p">(</span><span class="n">wid</span><span class="p">,</span> <span class="n">off</span><span class="p">)</span>                  <span class="o">=</span> <span class="o">-</span><span class="mf">0.525</span>
</pre></div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="lineshapes.html" title="8.5. Some Builtin Line-shape Functions"
             >next</a> |</li>
        <li class="right" >
          <a href="minimize.html" title="8.3. minimize() and objective Functions"
             >previous</a> |</li>
   <li>[<a href="../index.html"> Larch Home</a>|</li>
   <li><a href="../getting_started.html"> Getting Started</a>|</li>
   <li><a href="../xafs/index.html">XAFS Analysis</a>|</li>
   <li><a href="../xray/index.html">X-ray Databases</a>|</li>
   <li><a href="../xrf/index.html">XRF Analysis</a>|</li>
   <li><a href="index.html">Curve Fitting</a>|</li>

          <li class="nav-item nav-item-1"><a href="index.html" >8. Fitting and Modeling Data</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright Matthew Newville, The University of Chicago, 2012.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.
    </div>
  </body>
</html>