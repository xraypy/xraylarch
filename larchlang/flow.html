
<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>10.4. Conditional Execution and Flow Control &#8212; xraylarch 0.9.80 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/larchdoc.css?v=dfcb3266" />
    
    <script src="../_static/documentation_options.js?v=d8986006"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="10.5. Dealing With Errors" href="errors.html" />
    <link rel="prev" title="10.3. Basic Array Manipulation" href="arrays.html" />

<script async src="https://badge.dimensions.ai/badge.js" charset="utf-8"></script>

<script type="text/x-mathjax-config">
   MathJax.Hub.Config({ "TeX": {Macros: {AA : "{\\unicode{x212B}}"}}, "HTML-CSS": {scale: 90}});
</script>


  </head><body>
<div style=" color: #c5daba;  text-align: left; height:65px; padding: 0px">
<table border=0>
  <tr>
    <td width=20%>
	<a href="../index.html">
	 <img src="../_static/larchcones.png" height=50px alt="larchcones"/></a>
    </td>
    <td width=75% padding=0>
      <font size=+2>
	<a href="../index.html" style="color:#772211">
	  Larch: Data Analysis Tools for X-ray Spectroscopy
	</a>
      </font>
    </td>
   </tr></table>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="errors.html" title="10.5. Dealing With Errors"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="arrays.html" title="10.3. Basic Array Manipulation"
             accesskey="P">previous</a> |</li>
   <li>[<a href="../index.html"> Larch</a>|</li>
   <li><a href="../getting_started.html"> Getting Started</a>|</li>
   <li><a href="../xafs.html">XAFS Analysis</a>|</li>
   <li><a href="../xray.html">X-ray Databases</a>|</li>
   <li><a href="../xrf.html">XRF Analysis</a>|</li>

          <li class="nav-item nav-item-1"><a href="../larchlang.html" accesskey="U"><span class="section-number">10. </span>Larch Macro Language Tutorial</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">10.4. </span>Conditional Execution and Flow Control</a></li> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">10.4. Conditional Execution and Flow Control</a><ul>
<li><a class="reference internal" href="#conditional-evaluation-with-if-and-else">10.4.1. Conditional Evaluation with if and else</a></li>
<li><a class="reference internal" href="#for-loops">10.4.2. For loops</a></li>
<li><a class="reference internal" href="#while-loops">10.4.3. While loops</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="arrays.html"
                          title="previous chapter"><span class="section-number">10.3. </span>Basic Array Manipulation</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="errors.html"
                          title="next chapter"><span class="section-number">10.5. </span>Dealing With Errors</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/larchlang/flow.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="conditional-execution-and-flow-control">
<h1><span class="section-number">10.4. </span>Conditional Execution and Flow Control<a class="headerlink" href="#conditional-execution-and-flow-control" title="Link to this heading">¶</a></h1>
<p>Two important needs for a full-featured language are the ability to run
different statements under different conditions, and to repeat certain
calculations.  These are generally called ‘flow control’, as these
statements control how the program will flow through the text of the
script.  In the discussion here,  we will also introduce a few new concepts
and Larch statements.</p>
<p>So far in this tutorial, all the text written to the Larch command line has
been a single line of text that is immediately run, either printing output to
the terminal or assigning a value to a variable. These are both examples of
<strong>statements</strong>, which are the basic pieces pf text you send to the program.
So far we’ve seen three types of statements:</p>
<blockquote>
<div><ol class="arabic">
<li><p>simple statements or expressions, such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">larch</span><span class="o">&gt;</span> <span class="mi">1</span><span class="o">+</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">larch</span><span class="o">&gt;</span> <span class="n">atomic_weight</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>
</div>
<p>where we have an expression evaluated.  At the command line, these
values are printed – in a script they would not be printed.</p>
</li>
<li><p>print statements, such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">larch</span><span class="o">&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
<p>where we explicitly command larch to print the evaluated
expression – this would print if run from a script.</p>
</li>
<li><p>assignment statements, such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">larch</span><span class="o">&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>where we assign the name ‘x’ to hold the evaluated expression.</p>
</li>
</ol>
</div></blockquote>
<p>In fact, though these are the most common types of statements, there are
many more types of statements.  We will introduce a few more statement
types here, including compound statements that take up more than one line
of test.</p>
<section id="conditional-evaluation-with-if-and-else">
<h2><span class="section-number">10.4.1. </span>Conditional Evaluation with if and else<a class="headerlink" href="#conditional-evaluation-with-if-and-else" title="Link to this heading">¶</a></h2>
<p>A fundamental need is to be able to execute some statement(s) when some
condition is met.  This is done with the <strong>if</strong> statement, an example of
which is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">larch</span><span class="o">&gt;</span> <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x is 0!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Which will print ‘x is 0!’ if the value of <em>x</em> is equal to 0.  The <cite>x == 0</cite>
in this if statement is called the <strong>test</strong>.  A test is a Boolean
mathematical expression.  While most usual mathematical expressions use
operators such as ‘+’, ‘-’, a Boolean expression uses the operators listed
in <a class="reference internal" href="#tut-boolop-table"><span class="std std-ref">Table of Boolean Operators</span></a> to evaluate to a
value of <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<dl class="simple">
<dt>A single-line if statement as above looks like this::</dt><dd><p>if &lt;test&gt;:  statement</p>
</dd>
</dl>
<p>The ‘if’ and ‘:’ are important, while ‘&lt;test&gt;’ can be any Boolean
expression.  If the test evaluates to <code class="docutils literal notranslate"><span class="pre">True</span></code>, the statement is executed.</p>
<p>If statements can execute multiple statements by putting the statements
into a “block of code”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x is equal to 0!&#39;</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
<span class="c1">#endif</span>
</pre></div>
</div>
<p>Which is to say that the multiple-line form of the if statement looks like
this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="k">if</span> <span class="o">&lt;</span><span class="n">test</span><span class="o">&gt;</span><span class="p">:</span>
   <span class="o">&lt;</span><span class="n">statements</span><span class="o">&gt;</span>
<span class="c1">#endif</span>
</pre></div>
</div>
<p>where ‘&lt;statements&gt;’ here means a list of statements, and the ‘endif’ is
required (see <a class="reference internal" href="notpython.html#code-block-ends"><span class="std std-ref">Code Block Ends</span></a>). For the above, two statements will
be run if x is equal to 0 – there is no restriction on how many statements
can be run.</p>
<p>An ‘else’ statement can be added to execute code if the test is False:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
     <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x is equal to 0!&#39;</span><span class="p">)</span>
     <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
 <span class="k">else</span><span class="p">:</span>
     <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x is not 0&#39;</span><span class="p">)</span>
<span class="c1">#endif</span>
</pre></div>
</div>
<p>Multiple tests can be chained together with the ‘elif’ (a contraction of
‘else if’):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
     <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x is equal to 0!&#39;</span><span class="p">)</span>
 <span class="k">elif</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
     <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x is positive&#39;</span><span class="p">)</span>
 <span class="k">elif</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">10</span><span class="p">:</span>
     <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x is a small negative number&#39;</span><span class="p">)</span>
 <span class="k">else</span><span class="p">:</span>
     <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x is negative&#39;</span><span class="p">)</span>
<span class="c1">#endif</span>
</pre></div>
</div>
<p>Here the ‘x &gt; 0’ test will be executed if the ‘x == 0’ test fails, and the
‘x &gt; -10’ test will be tried if that fails.</p>
<p id="tut-boolop-table"><strong>Table of Boolean Operators</strong>  The operators here all take the form
<em>right OP left</em> where OP is one of the operators below.  Note the
distinction between ‘==’ and ‘is’.  The former compares <em>values</em> while the
latter compares the identity of two objects.</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>boolean operator</p></th>
<th class="head"><p>meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>==</p></td>
<td><p>has equal value</p></td>
</tr>
<tr class="row-odd"><td><p>!=</p></td>
<td><p>has unequal value</p></td>
</tr>
<tr class="row-even"><td><p>&gt;</p></td>
<td><p>has greater value</p></td>
</tr>
<tr class="row-odd"><td><p>&gt;=</p></td>
<td><p>has greater or equal value</p></td>
</tr>
<tr class="row-even"><td><p>&lt;</p></td>
<td><p>has smaller value</p></td>
</tr>
<tr class="row-odd"><td><p>&lt;=</p></td>
<td><p>has smaller or equal value</p></td>
</tr>
<tr class="row-even"><td><p>is</p></td>
<td><p>is identical to</p></td>
</tr>
<tr class="row-odd"><td><p>not</p></td>
<td><p>is not <code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
</tr>
<tr class="row-even"><td><p>and</p></td>
<td><p>both operands are <code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>or</p></td>
<td><p>either operand is <code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Note that in Larch, as in Python, any value can be used as a test, not just
values that are <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>.  As you might expect, for example,
the value 0 is treated as <code class="docutils literal notranslate"><span class="pre">False</span></code>.  An empty string is also treated as
<code class="docutils literal notranslate"><span class="pre">False</span></code>, as is an empty list or dictionary.  Most other values are
interpreted as <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</section>
<section id="for-loops">
<h2><span class="section-number">10.4.2. </span>For loops<a class="headerlink" href="#for-loops" title="Link to this heading">¶</a></h2>
<p>It is often necessary to repeat a calculation multiple times.  A common
method of doing this is to use a <strong>loop</strong>, including using a loop counter
to iterate over some set of values.  In Larch, this is done with a <strong>for
loop</strong>.  For those familiar with other languages, a Larch for loop is a bit
different from a C for loop or Fortran do loop.  A for loop in Larch
iterates over an ordered set of values as from a list, tuple, or array, or
over the keys from a dictionary.   Thus a loop like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1">#endfor</span>
</pre></div>
</div>
<p>will go through values ‘a’, ‘b’, and ‘c’,  assigning each value to <em>x</em>,
then printing the value of x, which will result in printing out:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span>
<span class="n">b</span>
<span class="n">c</span>
</pre></div>
</div>
<p>Similar to the <em>if</em> statement above, the for loop has the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="o">&lt;</span><span class="n">varlist</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">sequence</span><span class="o">&gt;</span><span class="p">:</span>
    <span class="o">&lt;</span><span class="n">statements</span><span class="o">&gt;</span>
<span class="c1">#endfor</span>
</pre></div>
</div>
<p>Compared to a C for loop or Fortran do loop, the Larch for loop is much
more like a  <em>foreach</em> loop.  The common C / Fortran use case of interating
over a set of integers can be emulated using the builtin <a class="reference internal" href="builtins.html#range" title="range"><code class="xref py py-func docutils literal notranslate"><span class="pre">range()</span></code></a>
function which generates a sequence of integers.   Thus:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
   <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="o">/</span><span class="mf">2.0</span><span class="p">)</span>
<span class="c1">#endfor</span>
</pre></div>
</div>
<p>will result in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.0</span>
<span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span>
<span class="mi">2</span><span class="p">,</span> <span class="mf">1.0</span>
<span class="mi">3</span><span class="p">,</span> <span class="mf">1.5</span>
<span class="mi">4</span><span class="p">,</span> <span class="mf">2.0</span>
</pre></div>
</div>
<p>Note that the builtin <a class="reference internal" href="builtins.html#range" title="range"><code class="xref py py-func docutils literal notranslate"><span class="pre">range()</span></code></a> function generates a sequence of
integers, and can take more than 1 argument to indicate a starting value
and step.  It is important to note that the sequence that is iterated order
does not be generated from the <a class="reference internal" href="builtins.html#range" title="range"><code class="xref py py-func docutils literal notranslate"><span class="pre">range()</span></code></a> function, but can be any list,
array, or Python sequence.  Importantly, this includes strings(!) so that:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="s1">&#39;hello&#39;</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">char</span><span class="p">)</span>
</pre></div>
</div>
<p>will print:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">h</span>
<span class="n">e</span>
<span class="n">l</span>
<span class="n">l</span>
<span class="n">o</span>
</pre></div>
</div>
<p>This can cause a common sort of error, in that you might expect some
variabe to hold a list of string values, but it actually holds a single
string.   Notice that:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">filelist</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;file1&#39;</span><span class="p">,</span> <span class="s1">&#39;file2&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">fname</span> <span class="ow">in</span> <span class="n">filelist</span><span class="p">:</span>
    <span class="n">fh</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
    <span class="n">process_file</span><span class="p">(</span><span class="n">fh</span><span class="p">)</span>
    <span class="n">fh</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="c1">#endfor</span>
</pre></div>
</div>
<p>would act very differently if filelist was changed to ‘file1’!</p>
<p>Multiple values can be assigned in each iteration of the for loop.  Thus,
iterating over a sequence of equal-length tuples, as in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="p">((</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="c1">#endfor</span>
</pre></div>
</div>
<p>will print:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="mi">1</span>
<span class="n">b</span> <span class="mi">2</span>
<span class="n">c</span> <span class="mi">3</span>
</pre></div>
</div>
<p>This may seem to be mostly of curious interest, but can be extremely useful
especially when dealing with dictionaries or with arrays or lists of equal
length.   For a dictionary <em>d</em>, <em>d.items()</em> will return a list of
two-element tuples as above of key, value.  Thus:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mydict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span><span class="mi">4</span><span class="p">}</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">mydict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
<span class="c1">#endfor</span>
</pre></div>
</div>
<p>will print (note that dictionaries do no preserve order, but the (key, val)
pairs match):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="mi">1</span>
<span class="n">c</span> <span class="mi">3</span>
<span class="n">b</span> <span class="mi">2</span>
<span class="n">d</span> <span class="mi">4</span>
</pre></div>
</div>
<p>The builtin <a class="reference internal" href="builtins.html#zip" title="zip"><code class="xref py py-func docutils literal notranslate"><span class="pre">zip()</span></code></a> function is similarly useful, turning a sequence of
lists or arrays into a sequence of tuples of the corresponding elements of
the lists or arrays.  Thus:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">larch</span><span class="o">&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">larch</span><span class="o">&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">larch</span><span class="o">&gt;</span> <span class="n">c</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">larch</span><span class="o">&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">))</span>
<span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.8414709848078965</span><span class="p">,</span> <span class="mf">0.54030230586813977</span><span class="p">),</span>
 <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.90929742682568171</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.41614683654714241</span><span class="p">),</span> <span class="o">....</span><span class="p">]</span>
</pre></div>
</div>
<p>(Note that for arrays or lists of unequal length, <a class="reference internal" href="builtins.html#zip" title="zip"><code class="xref py py-func docutils literal notranslate"><span class="pre">zip()</span></code></a> will return
tuples until any of its arguments runs out of elements).   Thus a for loop
can make use of the <a class="reference internal" href="builtins.html#zip" title="zip"><code class="xref py py-func docutils literal notranslate"><span class="pre">zip()</span></code></a> function to iterate over multiple arrays:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">larch</span><span class="o">&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">arange</span><span class="p">(</span><span class="mi">101</span><span class="p">)</span><span class="o">/</span><span class="mf">10.0</span>
<span class="n">larch</span><span class="o">&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;X   SIN(X)  SIN(Y)</span><span class="se">\n</span><span class="s1">================</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">larch</span><span class="o">&gt;</span> <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">sval</span><span class="p">,</span> <span class="n">cval</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">sin</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">cos</span><span class="p">(</span><span class="n">a</span><span class="p">)):</span>
<span class="o">.....&gt;</span>     <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.3f</span><span class="s1">, </span><span class="si">%.5f</span><span class="s1">, </span><span class="si">%.5f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">sval</span><span class="p">,</span> <span class="n">cval</span><span class="p">))</span>
<span class="o">.....&gt;</span> <span class="c1">#endfor</span>
</pre></div>
</div>
<p>will print a table of sine and cosine values.</p>
<p>A final utility of note for loops is <a class="reference internal" href="builtins.html#enumerate" title="enumerate"><code class="xref py py-func docutils literal notranslate"><span class="pre">enumerate()</span></code></a> which will return a
tuple of (index, value) for a sequence.   That is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">larch</span><span class="o">&gt;</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;, &#39;</span><span class="n">c</span><span class="s1">&#39;):</span>
<span class="o">.....&gt;</span>     <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
<span class="o">.....&gt;</span> <span class="c1">#endfor</span>
</pre></div>
</div>
<p>will print:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">0</span> <span class="n">a</span>
<span class="mi">1</span> <span class="n">b</span>
<span class="mi">2</span> <span class="n">c</span>
</pre></div>
</div>
<p>It is sometimes useful to jump out of a for loop, or go onto the next value
in the sequence.   The <em>break</em> statement will exit a for loop immediately:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">fname</span> <span class="ow">in</span> <span class="n">filelist</span><span class="p">:</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">get_status</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">status</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
       <span class="k">break</span>
    <span class="c1">#endif</span>
    <span class="n">more_processing</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
<span class="c1">#endfor</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;processed up to i = &#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<p>may jump out of the loop before the sequence generated by ‘range(10)’ is
complete.  The variable ‘i’ will have the final used value.</p>
<p>To skipover an iteration of a loop but continue on, use the <em>continue</em>
statement:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">fname</span> <span class="ow">in</span> <span class="n">filelist</span><span class="p">:</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">get_status</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">status</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
       <span class="k">continue</span>
    <span class="c1">#endif</span>
    <span class="n">more_processing</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
<span class="c1">#endfor</span>
</pre></div>
</div>
</section>
<section id="while-loops">
<h2><span class="section-number">10.4.3. </span>While loops<a class="headerlink" href="#while-loops" title="Link to this heading">¶</a></h2>
<p>While a for loop generally walks through a pre-defined set of values, a
<em>while</em> loop executes as long as some test is <code class="docutils literal notranslate"><span class="pre">True</span></code>.   The basic form
is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="o">&lt;</span><span class="n">test</span><span class="o">&gt;</span><span class="p">:</span>
   <span class="o">&lt;</span><span class="n">statements</span><span class="o">&gt;</span>
<span class="c1">#endwhile</span>
</pre></div>
</div>
<p>Here, the test works as for <em>if</em> – it is a Boolean expression, evaluated at
each iteration of the loop. Generally, the expression will test something
that has been changed inside the loop (even if implicitly).   The classic
while loop increases a counter at each iteration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">counter</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
   <span class="n">do_something</span><span class="p">(</span><span class="n">counter</span><span class="p">)</span>
   <span class="n">counter</span> <span class="o">=</span> <span class="n">counter</span> <span class="o">+</span> <span class="mi">1</span>
<span class="c1">#endwhile</span>
</pre></div>
</div>
<p>A while loop is easily turned into an infinite loop, simply by not
incrementing the counter.   Then again, the above loop would easily be
converted into a for loop, as the counter is incremented by a fixed amout at
each iteration.   A more realistic use would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">while</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>
   <span class="n">n</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mf">0.1</span><span class="p">)</span> <span class="o">*</span> <span class="n">n</span>
   <span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="c1">#endwhile</span>
</pre></div>
</div>
<p>An additional use for a while loop is to use an implicit or external
condition, such as time:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">now</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="c1"># return the time in seconds since Unix epoch</span>
<span class="k">while</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">now</span> <span class="o">&lt;</span> <span class="mi">15</span><span class="p">:</span>   <span class="c1"># That is &#39;for 15 seconds&#39;</span>
   <span class="n">do_someting</span><span class="p">()</span>
<span class="c1">#endwhile</span>
</pre></div>
</div>
<p>The <em>break</em> and <em>continue</em> statements also work for while loops, just as they
do with for loops.   These can be used as ways to exit an other-wise infinite
while loop:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>  <span class="c1"># will never exit without break!</span>
   <span class="n">answer</span> <span class="o">=</span> <span class="n">raw_input</span><span class="p">(</span><span class="s1">&#39;guess my favorite color&gt;&#39;</span><span class="p">)</span>
   <span class="k">if</span> <span class="n">answer</span> <span class="o">==</span> <span class="s1">&#39;lime&#39;</span><span class="p">:</span>
       <span class="k">break</span>
   <span class="k">else</span><span class="p">:</span>
       <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Nope, try again&#39;</span><span class="p">)</span>
   <span class="c1">#endif</span>
<span class="c1">#endwhile</span>
</pre></div>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="errors.html" title="10.5. Dealing With Errors"
             >next</a> |</li>
        <li class="right" >
          <a href="arrays.html" title="10.3. Basic Array Manipulation"
             >previous</a> |</li>
   <li>[<a href="../index.html"> Larch</a>|</li>
   <li><a href="../getting_started.html"> Getting Started</a>|</li>
   <li><a href="../xafs.html">XAFS Analysis</a>|</li>
   <li><a href="../xray.html">X-ray Databases</a>|</li>
   <li><a href="../xrf.html">XRF Analysis</a>|</li>

          <li class="nav-item nav-item-1"><a href="../larchlang.html" ><span class="section-number">10. </span>Larch Macro Language Tutorial</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">10.4. </span>Conditional Execution and Flow Control</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright Matthew Newville, The University of Chicago, 2022.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.3.7.
    </div>
  </body>
</html>