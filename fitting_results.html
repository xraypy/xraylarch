

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>12.4. Fit Results and Outputs &#8212; xraylarch 0.9.57 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/larchdoc.css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="12.5. Some Builtin Line-shape Functions" href="fitting_lineshapes.html" />
    <link rel="prev" title="12.3. minimize() and objective Functions" href="fitting_minimize.html" />

<script async src="https://badge.dimensions.ai/badge.js" charset="utf-8"></script>

<script type="text/x-mathjax-config">
   MathJax.Hub.Config({ "TeX": {Macros: {AA : "{\\unicode{x212B}}"}}, "HTML-CSS": {scale: 90}});
</script>


  </head><body>
<div style=" color: #c5daba;  text-align: left; height:65px; padding: 0px">
<table border=0>
  <tr>
    <td width=20%>
	<a href="index.html">
	 <img src="_static/larchcones.png" height=50px alt="larchcones"/></a>
    </td>
    <td width=75% padding=0>
      <font size=+2>
	<a href="index.html" style="color:#772211">
	  Larch: Data Analysis Tools for X-ray Spectroscopy
	</a>
      </font>
    </td>
   </tr></table>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="fitting_lineshapes.html" title="12.5. Some Builtin Line-shape Functions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="fitting_minimize.html" title="12.3. minimize() and objective Functions"
             accesskey="P">previous</a> |</li>
   <li>[<a href="index.html"> Larch</a>|</li>
   <li><a href="getting_started.html"> Getting Started</a>|</li>
   <li><a href="xafs.html">XAFS Analysis</a>|</li>
   <li><a href="xray.html">X-ray Databases</a>|</li>
   <li><a href="xrf.html">XRF Analysis</a>|</li>

          <li class="nav-item nav-item-1"><a href="fitting.html" accesskey="U"><span class="section-number">12. </span>Fitting and Modeling Data</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">12.4. </span>Fit Results and Outputs</a></li> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="fitting_minimize.html"
                        title="previous chapter"><span class="section-number">12.3. </span><code class="xref py py-func docutils literal notranslate"><span class="pre">minimize()</span></code> and objective Functions</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="fitting_lineshapes.html"
                        title="next chapter"><span class="section-number">12.5. </span>Some Builtin Line-shape Functions</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/fitting_results.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="fit-results-and-outputs">
<span id="fitting-results-sec"></span><h1><span class="section-number">12.4. </span>Fit Results and Outputs<a class="headerlink" href="#fit-results-and-outputs" title="Permalink to this headline">¶</a></h1>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.9.34: </span><a class="reference internal" href="fitting_minimize.html#minimize" title="minimize"><code class="xref py py-func docutils literal notranslate"><span class="pre">minimize()</span></code></a> returns a result group containing fit statistics.</p>
</div>
<p>After the fit has completed, several statistics are output and available to
describe the quality of the fit and the estimated values for the Parameter
values and uncertainties.  The main statistics are written to group
returned by <a class="reference internal" href="fitting_minimize.html#minimize" title="minimize"><code class="xref py py-func docutils literal notranslate"><span class="pre">minimize()</span></code></a>, while the parameter values in <em>paramgroup</em>
are updated to their best-fit values.</p>
<p>The estimated values, uncertainties, and correlations for each varied
Parameter are written as attributes of that Parameter.  Thus, after a fit,
each variable Parameter <code class="docutils literal notranslate"><span class="pre">par</span></code> will be updated so that <code class="docutils literal notranslate"><span class="pre">par.value</span></code> will
hold the estimated best-fit value, <code class="docutils literal notranslate"><span class="pre">par.stderr</span></code> will hold the estimated
uncertainty (1-<span class="math notranslate nohighlight">\(\sigma\)</span> standard error), and <code class="docutils literal notranslate"><span class="pre">par.correl</span></code> will hold
a dictionary of correlation values with the other variable Parameters.</p>
<p>General Fit statistics describing the quality of the fit and details about
how the fit proceeded will be put into the result group with
variable names and meanings as outlines in
<a class="reference internal" href="#minimize-stats-table"><span class="std std-ref">Table of Fit Statistics</span></a>.  For advanced users,
the fitting class instance and result from <cite>lmfit</cite> are available.</p>
<blockquote id="minimize-stats-table">
<div><p>Table of Fit Statistics and Results contained in the return value of <a class="reference internal" href="fitting_minimize.html#minimize" title="minimize"><code class="xref py py-func docutils literal notranslate"><span class="pre">minimize()</span></code></a>.</p>
<p>Listed are the names and description of items in the fit result group
returned by the <a class="reference internal" href="fitting_minimize.html#minimize" title="minimize"><code class="xref py py-func docutils literal notranslate"><span class="pre">minimize()</span></code></a> function.  Many of these items are
directly from <a class="reference external" href="https://lmfit.github.io/lmfit-py/">lmfit</a>.</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 13%" />
<col style="width: 87%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>name</p></th>
<th class="head"><p>Description of Statistical Quantity or Output</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>nvarys</p></td>
<td><p>number of variable parameters in the fit</p></td>
</tr>
<tr class="row-odd"><td><p>ndata</p></td>
<td><p>number of data points</p></td>
</tr>
<tr class="row-even"><td><p>nfree</p></td>
<td><p>ndata - nfree</p></td>
</tr>
<tr class="row-odd"><td><p>chi_square</p></td>
<td><p>chi-square: <span class="math notranslate nohighlight">\(\chi^2 = \sum_i^N [{\rm Resid}_i]^2\)</span></p></td>
</tr>
<tr class="row-even"><td><p>chi_reduced</p></td>
<td><p>reduced chi-square: <span class="math notranslate nohighlight">\(\chi^2_{\nu}= {\chi^2} / {(N - N_{\rm varys})}\)</span> |</p></td>
</tr>
<tr class="row-odd"><td><p>aic</p></td>
<td><p><a class="reference external" href="https://lmfit.github.io/lmfit-py/fitting.html#akaike-and-bayesian-information-criteria">Akaike Information Criteria</a></p></td>
</tr>
<tr class="row-even"><td><p>bic</p></td>
<td><p><a class="reference external" href="https://lmfit.github.io/lmfit-py/fitting.html#akaike-and-bayesian-information-criteria">Bayesian Information Criteria</a></p></td>
</tr>
<tr class="row-odd"><td><p>residual</p></td>
<td><p>final residual array</p></td>
</tr>
<tr class="row-even"><td><p>covar</p></td>
<td><p>covariance matrix (ordered according to <cite>var_names</cite>).</p></td>
</tr>
<tr class="row-odd"><td><p>var_names</p></td>
<td><p>list of variable parameter names</p></td>
</tr>
<tr class="row-even"><td><p>params</p></td>
<td><p>lmfit <a class="reference external" href="https://lmfit.github.io/lmfit-py/parameters.html#lmfit.parameter.Parameters">Parameters</a></p></td>
</tr>
<tr class="row-odd"><td><p>fitter</p></td>
<td><p>lmfit <a class="reference external" href="https://lmfit.github.io/lmfit-py/fitting.html#lmfit.minimizer.Minimizer">Minimizer</a></p></td>
</tr>
<tr class="row-even"><td><p>fit_details</p></td>
<td><p>lmfit <a class="reference external" href="https://lmfit.github.io/lmfit-py/fitting.html#lmfit.minimizer.MinimizerResult">MinimizerResult</a></p></td>
</tr>
<tr class="row-odd"><td><p>nfev</p></td>
<td><p>number of evaluations of the fit residual function.</p></td>
</tr>
<tr class="row-even"><td><p>success</p></td>
<td><p>bool (<cite>True</cite> or <cite>False</cite>) for whether fit appeared to succeed.</p></td>
</tr>
<tr class="row-odd"><td><p>errorbars</p></td>
<td><p>bool (<cite>True</cite> or <cite>False</cite>) for whether uncertainties were estimated.</p></td>
</tr>
<tr class="row-even"><td><p>message</p></td>
<td><p>text message from fit</p></td>
</tr>
<tr class="row-odd"><td><p>lmdif_message</p></td>
<td><p>text message from Fortran least-squares function</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.9.34: </span><a class="reference internal" href="#fit_report" title="fit_report"><code class="xref py py-func docutils literal notranslate"><span class="pre">fit_report()</span></code></a> uses a result group returned by <a class="reference internal" href="fitting_minimize.html#minimize" title="minimize"><code class="xref py py-func docutils literal notranslate"><span class="pre">minimize()</span></code></a></p>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="fit_report">
<span class="sig-name descname"><span class="pre">fit_report</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_correl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_correl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fit_report" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a fit report for a fit given a parameter group.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>result</strong> – fit result group, returned by <a class="reference internal" href="fitting_minimize.html#minimize" title="minimize"><code class="xref py py-func docutils literal notranslate"><span class="pre">minimize()</span></code></a>.</p></li>
<li><p><strong>show_correl</strong> – flag (<code class="docutils literal notranslate"><span class="pre">True</span></code>/<code class="docutils literal notranslate"><span class="pre">False</span></code>) to show parameter correlations.</p></li>
<li><p><strong>min_correl</strong> – smallest absolute value of correlation to show.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>string of fit report.   This can be printed or stored.</p>
</dd>
</dl>
</dd></dl>

<p>A typical result from <a class="reference internal" href="#fit_report" title="fit_report"><code class="xref py py-func docutils literal notranslate"><span class="pre">fit_report()</span></code></a> would look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">larch</span><span class="o">&gt;</span> <span class="nb">print</span> <span class="n">fit_report</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="p">[[</span><span class="n">Fit</span> <span class="n">Statistics</span><span class="p">]]</span>
    <span class="c1"># function evals   = 28</span>
    <span class="c1"># data points      = 201</span>
    <span class="c1"># variables        = 4</span>
    <span class="n">chi</span><span class="o">-</span><span class="n">square</span>         <span class="o">=</span> <span class="mf">0.50471</span>
    <span class="n">reduced</span> <span class="n">chi</span><span class="o">-</span><span class="n">square</span> <span class="o">=</span> <span class="mf">0.002562</span>
    <span class="n">Akaike</span> <span class="n">info</span> <span class="n">crit</span>   <span class="o">=</span> <span class="o">-</span><span class="mf">1195.4</span>
    <span class="n">Bayesian</span> <span class="n">info</span> <span class="n">crit</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1182.2</span>
<span class="p">[[</span><span class="n">Variables</span><span class="p">]]</span>
    <span class="n">amp</span><span class="p">:</span>   <span class="mf">12.0312835</span> <span class="o">+/-</span> <span class="mf">0.076725</span> <span class="p">(</span><span class="mf">0.64</span><span class="o">%</span><span class="p">)</span> <span class="p">(</span><span class="n">init</span><span class="o">=</span> <span class="mi">5</span><span class="p">)</span>
    <span class="n">wid</span><span class="p">:</span>   <span class="mf">2.01663402</span> <span class="o">+/-</span> <span class="mf">0.011920</span> <span class="p">(</span><span class="mf">0.59</span><span class="o">%</span><span class="p">)</span> <span class="p">(</span><span class="n">init</span><span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">off</span><span class="p">:</span>   <span class="mf">0.99188155</span> <span class="o">+/-</span> <span class="mf">0.005226</span> <span class="p">(</span><span class="mf">0.53</span><span class="o">%</span><span class="p">)</span> <span class="p">(</span><span class="n">init</span><span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">cen</span><span class="p">:</span>   <span class="mf">1.49995279</span> <span class="o">+/-</span> <span class="mf">0.010144</span> <span class="p">(</span><span class="mf">0.68</span><span class="o">%</span><span class="p">)</span> <span class="p">(</span><span class="n">init</span><span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">[[</span><span class="n">Correlations</span><span class="p">]]</span> <span class="p">(</span><span class="n">unreported</span> <span class="n">correlations</span> <span class="n">are</span> <span class="o">&lt;</span>  <span class="mf">0.100</span><span class="p">)</span>
    <span class="n">C</span><span class="p">(</span><span class="n">amp</span><span class="p">,</span> <span class="n">off</span><span class="p">)</span>                  <span class="o">=</span> <span class="o">-</span><span class="mf">0.730</span>
    <span class="n">C</span><span class="p">(</span><span class="n">amp</span><span class="p">,</span> <span class="n">wid</span><span class="p">)</span>                  <span class="o">=</span>  <span class="mf">0.719</span>
    <span class="n">C</span><span class="p">(</span><span class="n">wid</span><span class="p">,</span> <span class="n">off</span><span class="p">)</span>                  <span class="o">=</span> <span class="o">-</span><span class="mf">0.525</span>
</pre></div>
</div>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="fitting_lineshapes.html" title="12.5. Some Builtin Line-shape Functions"
             >next</a> |</li>
        <li class="right" >
          <a href="fitting_minimize.html" title="12.3. minimize() and objective Functions"
             >previous</a> |</li>
   <li>[<a href="index.html"> Larch</a>|</li>
   <li><a href="getting_started.html"> Getting Started</a>|</li>
   <li><a href="xafs.html">XAFS Analysis</a>|</li>
   <li><a href="xray.html">X-ray Databases</a>|</li>
   <li><a href="xrf.html">XRF Analysis</a>|</li>

          <li class="nav-item nav-item-1"><a href="fitting.html" ><span class="section-number">12. </span>Fitting and Modeling Data</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">12.4. </span>Fit Results and Outputs</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright Matthew Newville, The University of Chicago, 2020.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.2.0.
    </div>
  </body>
</html>